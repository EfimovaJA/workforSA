Задание 1: Анализ требований  
Описание: Вам попал на руки фрагмент технического задания на разработку функционала "Корзина" для интернет-магазина "Петрушка Зеленая". В ТЗ есть несколько логических противоречий, недочетов и неполных мест.  
Раздел ТЗ: Функционал корзины

1. Пользователь может добавить в корзину от 1 до 10 единиц одного товара.
2. Пользователь может изменить количество каждого товара в корзине не менее, чем до 1-го. Для удаления товара из корзины используется отдельная кнопка.
3. В корзине может находиться не более 5 различных товаров.
4. Суммарное количество всех товаров в корзине не может превышать 20 штук.
5. Товары в корзине могут быть разные.
6. При попытке добавить товар, превышающий лимиты, система показывает сообщение: "Лимит корзины превышен".
7. Цена на продукт фиксируется на момент добавления в корзину и не меняется.
8. На странице корзины отображается список товаров, их количество, цена за единицу и общая стоимость позиции.
9. Если пользователь уменьшает количество товара до 0, товар удаляется из корзины.
10. В корзине может быть реклама других продуктов.
11. Реклама товаров в корзине должна быть каждый будний день по утрам и вечерам.
13. Если цена на товар изменилась в каталоге, система должна автоматически обновить ее в корзине у всех пользователей.

Что нужно сделать:
1. Найдите и перечислите все логические противоречия и недочеты в предоставленном ТЗ. Объясните, в чем заключается проблема для каждого пункта.
2. Предложите конкретные исправления для устранения этих противоречий - напишите свою версию этого фрагмента ТЗ, которая должна быть логически завершенной и непротиворечивой.
3. Какие уточняющие вопросы вы бы задали продукт-менеджеру или бизнес-заказчику по этому ТЗ?

Решение:
1. Логические противоречия и недочеты в ТЗ:
  1. Противоречие между пунктами 2 и 9 (изменение количества товара и удаление): 
  Пункт 2 утверждает, что количество товара в корзине нельзя уменьшать ниже 1, и для удаления используется отдельная кнопка. Пункт 9 говорит, что если пользователь уменьшит количество до 0, товар автоматически удаляется. 
  Проблема: разработчик не поймет, как реализовывать логику изменения количества: с валидацией на минимум 1 или с возможностью идти до 0.

  2. Противоречие между пунктами 7 и 13 (фиксация и обновление цены):  
   Пункт 7 гласит, что цена фиксируется на момент добавления в корзину и не меняется. Пункт 13 требует автоматического обновления цены в корзине у всех пользователей, если она изменилась в каталоге. Цена не может быть одновременно фиксированной и обновляемой. 
   Проблема: это создает конфликт в логике, фиксированная цена защищает пользователя от изменений, но обновление этому противоречит.

  3. Избыточность пункта 5 (Товары в корзине могут быть разные):  
  Из пункта 3 (не более 5 различных товаров) уже следует, что корзина может содержать разные товары. 
  Проблема: это не добавляет ценности, но может запутать, подразумевая какое-то ограничение.

  4. Неполнота и неясность в пунктах 10 и 11 (реклама в корзине):  
   Пункт 10 говорит, что в корзине "может быть" реклама, а пункт 11, что она "должна быть каждый будний день по утрам и вечерам". Не понятно, как определить "утро и вечер" (часы, например, 7-10 утра и 18-21 вечера?), по какому времени (локальное пользователя, UTC, серверное?), и для кого (все пользователи или сегментированные?). Кроме того, не описано, как интегрировать рекламу (баннеры, рекомендации?), какие товары рекламировать, и как это влияет на лимиты корзины. 
   Проблема: без детализации реализация может быть произвольной, что приведет к несоответствию ожиданиям бизнеса (например, реклама не покажется в нужное время из-за часовых поясов).

  5. Недочет в пункте 1 (добавление от 1 до 10 единиц одного товара):  
   Не указано, можно ли добавлять один и тот же товар несколько раз (суммируя количество), или лимит 10 — это максимум на весь сеанс. Если суммирование разрешено, то в комбинации с условием суммарно не более 20 штук, этоприведет к превышениям. 
   Проблема: отсутствие уточнения о поведении при повторном добавлении того же товара — это может вызвать ошибки в логике (например, добавление 10, потом еще 1 — разрешить или нет?).

  6. Недочет в пункте 6 (сообщение о превышении лимитов):  
   Указано общее сообщение "Лимит корзины превышен", но лимиты разные: по видам товаров, по количеству на товар, по суммарному количеству.
   Проблема: сообщение слишком общее - пользователь не поймет, какой именно лимит превышен, "превышен лимит по видам товаров" или "превышен лимит по количеству". Это ухудшает UX, так как не дает четкой ос.

  7. Общий недочет: Пропущен пункт 12:  
   В нумерации пропущен пункт 12 (идет 11, потом 13). 
   Проблема: это может быть опечаткой, но указывает на неаккуратность ТЗ.

  8. Общие недочеты в ТЗ в целом:  
   - Нет упоминания о сохранении корзины локально в браузере, в сессии, в БД для авторизованных пользователей?
   - Не указано поведение для неавторизованных пользователей.  
   - Отсутствует интеграция с другими частями системы скидки, промокоды.
   - Нет описания UI-элементов, где кнопка удаления, как менять количество. 
   Проблема: ТЗ неполное, что может привести к дополнительным итерациям разработки и рискам несоответствия.

2. Исправленная версия фрагмента ТЗ:
  - Для количества: минимум 1, удаление только кнопкой.
  - Для цены: фиксируется на момент добавления.
  - Убираем избыточный пункт 5.
  - Уточнения по рекламе: реклама опциональная, и с четкими правилами показа.
  - Уточнение лимитов, сообщения, добавление повторных товаров.

  Раздел ТЗ: Функционал корзины
  1. Пользователь может добавить в корзину от 1 до 10 единиц одного товара за один раз. Если товар уже в корзине, количество суммируется, но не может превышать 10 единиц для этого товара в сумме.
  2. Пользователь может изменить количество каждого товара в корзине в диапазоне от 1 до 10 единиц. Система не позволяет уменьшать количество ниже 1 или увеличивать выше 10. Для удаления товара из корзины используется отдельная кнопка "Удалить".
  3. В корзине может находиться не более 5 различных товаров.
  4. Суммарное количество всех товаров в корзине (независимо от видов) не может превышать 20 штук.
  5. При попытке добавить или изменить количество товара, приводящей к превышению лимитов, система показывает конкретное сообщение об ошибке:  
     - "Превышен лимит по количеству для этого товара (максимум 10 единиц)", если превышен лимит на товар.  
     - "Превышен лимит по видам товаров в корзине (максимум 5)", если добавляется 6-й вид.  
     - "Превышен общий лимит по количеству товаров в корзине (максимум 20 штук)", если суммарное количество превысит 20.
  6. Цена на продукт фиксируется на момент добавления в корзину и не меняется, даже если цена в каталоге обновится.
  7. На странице корзины отображается список товаров с указанием: названия товара, количества, цены за единицу (фиксированной), общей стоимости позиции (количество × цена) и общей суммы корзины.
  8. В корзине может отображаться реклама других продуктов (рекомендации или баннеры). Реклама показывается опционально, в зависимости от бизнес-правил.
  9. Реклама в корзине отображается только в будние дни (понедельник–пятница) в утренние часы (с 7:00 до 10:00) и вечерние часы (с 18:00 до 21:00) по локальному времени пользователя. Если время не соответствует, реклама не показывается. Рекламируемые товары выбираются на основе категорий в корзине (например, связанные продукты), но не добавляются в корзину автоматически.
  10. Корзина сохраняется в сессии браузера для неавторизованных пользователей и в БД для авторизованных, чтобы сохраняться между сеансами.

3. Уточняющие вопросы к продукт-менеджеру или бизнес-заказчику
- О лимитах и добавлении товаров:  
  1. Должен ли быть глобальный лимит на количество для одного товара (10) суммарным, или можно добавлять по 10 несколько раз (например, добавить 10, потом еще 10, итого 20 для одного товара, если общий лимит 20 позволяет)?  
  2. Что делать, если при суммировании повторного добавления превышается общий лимит 20? Приоритет какому лимиту?  
- О ценах и обновлениях:  
  3. Подтвердите: цена должна фиксироваться или обновляться динамически? Если обновляться, то когда (в реальном времени, при открытии корзины) и нужно ли уведомлять пользователя?  
  4. Будут ли скидки, промокоды или налоги в корзине? Как они применяются (к фиксированной цене или актуальной)?
- О рекламе:  
  5. Какие именно товары рекламировать (алгоритм: случайные, на основе корзины, топ-продаж)?  
  6. Как определять "утра и вечера" — по локальному времени пользователя, серверному или UTC? Что если пользователь в другом часовом поясе?  
  7. Должна ли реклама быть обязательной в указанное время, или это рекомендация? Что если реклама мешает UX (например, на мобильных устройствах)?
- О UI:  
  8. Нужно ли подтверждение при удалении товара кнопкой?  
  9. Что отображается, если корзина пустая (сообщение, рекомендации)?
- Общие вопросы:  
  10. Как обрабатывать корзину для гостей (неавторизованных) — сохранять в куках/localStorage, или только в сессии?  
  11. Интеграция с другими модулями: как корзина связана с оформлением заказа, оплатой?  
  12. Есть ли A/B-тестирование или аналитика для корзины (например, трекинг брошенных корзин)?  

